<html>
<head>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script type="text/javascript" src="oxocard.js"></script>
</head>
<body>
<div id="content">
<ul id="device_list"></ul>
</div>

<textarea id="sourcecode" rows="50" cols="100">
#include "OXOcardRunner.h"

void setup() {
  clearDisplay();
}

void loop() {
  handleAutoTurnOff();
  clearDisplay();
  drawImage(0b00000000,
            0b01100110,
            0b01100110,
            0b00000000,
            0b00000000,
            0b01000010,
            0b00111100,
            0b00000000, 255);
  delay(1000);
  clearDisplay();
  drawImage(0b00000000,
            0b01100000,
            0b01100110,
            0b00000000,
            0b00000000,
            0b01000010,
            0b00111100,
            0b00011000, 255);
  delay(1000);
}
</textarea>

<script>

var s = null;

function foundAgent(agent){
	s =  new OXOcard.AgentSocket({'url':agent.foundAgentWS});
	new OXOcard.AgentSerialList({'socket':s});
	new OXOcard.AgentSerialList({'socket':s});
	new OXOcard.AgentSerialList({'socket':s});
}

//  var socket = io();
var c = new OXOcard.ArduinoCompiler();

var f = new OXOcard.AgentFinder({'callback':foundAgent});
f.find();
</script>
</body>
</html>
